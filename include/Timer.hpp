//!
//! @file				Timer.hpp
//! @author				Geoffrey Hunter <gbmhunter@gmail.com> (www.mbedded.ninja)
//! @created			2014-09-05
//! @last-modified		2014-09-11
//! @brief 				Timer object.
//! @details
//!					

#ifndef __cplusplus
	#error Please build with C++ compiler
#endif

//===============================================================================================//
//======================================== HEADER GUARD =========================================//
//===============================================================================================//

#ifndef MOSAL_TIMER_H
#define MOSAL_TIMER_H

//===============================================================================================//
//==================================== FORWARD DECLARATION ======================================//
//===============================================================================================//

namespace MbeddedNinja
{
	namespace MOsalNs
	{
		class Timer;
	}
}

//===============================================================================================//
//========================================== INCLUDES ===========================================//
//===============================================================================================//

// System headers
#include <cstdint>		// int8_t, int32_t e.t.c

// User libraries
#include "MAssert/api/MAssertApi.hpp"

// User headers
#include "Osal.hpp"

//===============================================================================================//
//======================================== NAMESPACE ============================================//
//===============================================================================================//

namespace MbeddedNinja
{
	namespace MOsalNs
	{
		
		//! @brief
		//! @details
		//! @note
		class Timer
		{
			
		public:

			//======================================================================================//
			//==================================== PUBLIC METHODS ==================================//
			//======================================================================================//

			static void StaticInit(Osal * osal);

			//! @brief		Timer constructor.
			//! @param		timeoutInMs		The timeout period for this timer. The timer starts couting once
			//!								you call Start().
			Timer(uint32_t timeoutInMs);

			//! @brief		Starts the timer.
			void Start();

			//! @brief		Call this to check if the timer has expired.
			//! @returns	True if the timer has expired, otherwise false.
			bool IsExpired() const;

			//! @brief		Call to find out how much time the timer has left remaining until it exipres.
			//! @returns	The amount of time the timer has left until it expires.
			uint32_t GetRemainingTime() const;

			//======================================================================================//
			//================================= PUBLIC VARIABLES ===================================//
			//======================================================================================//

			// none

			private:

				//======================================================================================//
				//=================================== PRIVATE METHODS ==================================//
				//======================================================================================//

				// none

				//======================================================================================//
				//================================== PRIVATE VARIABLES =================================//
				//======================================================================================//

				static Osal * osal;

				uint32_t startTimeInMs;
				uint32_t timeoutInMs;

			protected:
	
				//======================================================================================//
				//=================================== PROTECTED METHODS ================================//
				//======================================================================================//
				
				

				//======================================================================================//
				//================================== PROTECTED VARIABLES ===============================//
				//======================================================================================//

			
		}; // class timer


	} // namespace OsalNs
} // namespace MbeddedNinja

#endif	// #ifndef MOSAL_TIMER_H

// EOF
